<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: board/utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: board/utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { db, auth } from "../common/firebase.js";
import { ref, update, get, child } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

export function initialsFrom(str = "") {
  const s = String(str).trim();
  if (!s) return "?";
  const parts = s.split(/\s+/);
  const ini = (parts[0]?.[0] || "") + (parts[1]?.[0] || "");
  return (ini || s[0]).toUpperCase();
}

export async function loadTask(id) {
  const root = ref(db);
  const snap = await get(child(root, `tasks/${id}`));
  return snap.exists() ? { id, ...snap.val() } : null;
}

export function getCurrentUser() {
  const user = auth.currentUser;
  return user ? { id: user.uid, name: user.displayName, email: user.email } : null;
}

export function colorFromString(str) {
  if (!str) return "#999";

  let hash = 0;
  for (let i = 0; i &lt; str.length; i++) {
    hash = str.charCodeAt(i) + ((hash &lt;&lt; 5) - hash);
  }

  const hue = Math.abs(hash) % 360;
  return `hsl(${hue}, 65%, 55%)`;
}


export const ScrollLock = (() => {
  let y = 0;

  function lock() {
    y = window.scrollY || 0;
    const b = document.body;

    b.style.position = "fixed";
    b.style.top = `-${y}px`;
    b.style.left = "0";
    b.style.right = "0";
    b.style.overflow = "hidden";

  }

  function unlock() {
    const b = document.body;
    b.style.overflow = "";
    b.style.position = "";
    b.style.top = "";
    b.style.left = "";
    b.style.right = "";


    window.scrollTo(0, y);
  }

  return { set: lock, release: unlock };
})();


// später ersetzen 


/**
 * Generiert eine Farbe basierend auf Initialen
 */

export function getColorForInitials(initials) {
  const colors = [
    "#FF6B6B",
    "#00B8D4",
    "#1DE9B6",
    "#00CFAE",
    "#00BCD4",
    "#2196F3",
    "#3D5AFE",
    "#7C4DFF",
    "#AB47BC",
    "#E040FB",
  ];
  const charCode = initials.charCodeAt(0);
  return colors[charCode % colors.length];
}

/**
 * Extrahiert Initialen aus einem Namen
 */
export function getInitials(name) {
  if (!name) return "??";
  const cleanName = name.replace(/\s*\(Du\)\s*$/i, "").trim();
  const parts = cleanName.split(" ");
  if (parts.length === 1) return parts[0].substring(0, 2).toUpperCase();
  return (parts[0][0] + parts[parts.length - 1][0]).toUpperCase();
}

/**
 * Setzt den Task-Status
 */
export function setTaskStatus(message, isError) {
  const status = document.getElementById("taskStatus");
  if (!status) return;
  status.textContent = message;
  status.classList.toggle("error", !!isError);
}

export function closeTaskOverlay() {
  const overlay = document.getElementById("taskOverlay");
  if (!overlay) return;

  overlay.classList.remove("active");
  overlay.cleanup?.();
  clearModal()
}

export function clearModal(delay = 300) {
  const section = document.getElementById("taskModal");
  if (!section) return;

  ScrollLock.release()

  setTimeout(() => {
    section.innerHTML = "";
    [...section.attributes].forEach(attr => {
      if (attr.name !== "id") section.removeAttribute(attr.name);
    });
  }, delay);
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-add-task.html">add-task</a></li><li><a href="module-authService.html">authService</a></li><li><a href="module-board.html">board</a></li><li><a href="module-contacts.html">contacts</a></li><li><a href="module-layout.html">layout</a></li><li><a href="module-login.html">login</a></li><li><a href="module-pageGuard.html">pageGuard</a></li><li><a href="module-search.html">search</a></li><li><a href="module-signup.html">signup</a></li><li><a href="module-summary.html">summary</a></li><li><a href="module-tasks.html">tasks</a></li></ul><h3>Global</h3><ul><li><a href="global.html#fetchTemplate">fetchTemplate</a></li><li><a href="global.html#getColorForInitials">getColorForInitials</a></li><li><a href="global.html#getInitials">getInitials</a></li><li><a href="global.html#injectTemplate">injectTemplate</a></li><li><a href="global.html#insertTemplates">insertTemplates</a></li><li><a href="global.html#loadFirebaseDatabase">loadFirebaseDatabase</a></li><li><a href="global.html#setTaskStatus">setTaskStatus</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Wed Oct 22 2025 15:29:10 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
